generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  username     String   @unique
  password     String
  createdAt    DateTime @default(now())
  updateAt     DateTime @updatedAt
  posts_count  Float?   @default(0) @db.Real
  routes_count Float?   @default(0) @db.Real
  bikes_count  Float?   @default(0) @db.Real
  bikes        Bike[]
   posts       Post[]
}

model Bike {
  id         Int         @id @default(autoincrement())
  userId     Int
  brand      String
  model      String
  createdAt  DateTime    @default(now())
  updateAt   DateTime    @updatedAt
  user       User        @relation(fields: [userId], references: [id])
  components Component[]
}

model Component {
  id               Int      @id @default(autoincrement())
  bikeId           Int
  type             String
  brand            String
  model            String
  maintenanceDate  DateTime
  currentState     String
  currentMileageKm Float
  maintenanceCost  Float
  createdAt        DateTime @default(now())
  updateAt         DateTime @updatedAt
  bike             Bike     @relation(fields: [bikeId], references: [id])
}

model Post {
  id          Int      @id @default(autoincrement())
  userId      Int
  imageUrl    String
  description String
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id])  
}